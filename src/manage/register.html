<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Register - Express Me</title>
<link rel="stylesheet" href="/static/css/blueprint/screen.css" type="text/css" media="screen, projection">
<!--[if lt IE 8]>
	<link rel="stylesheet" href="/static/css/blueprint/ie.css" type="text/css" media="screen, projection">
<![endif]-->
<link rel="stylesheet" href="/manage/static/custom.css" type="text/css" media="screen, projection">
<script type="text/javascript" src="/static/js/jquery/jquery.js"></script>
<script type="text/javascript" src="/static/js/utils/md5.js"></script>
<script type="text/javascript" src="/static/js/utils/str.js"></script>
#raw
<script type="text/javascript">
function validate_form() {
  var email = $("#email").val();
  if (!is_email(email)) {
    show_error("Please enter a correct email address.");
    return false;
  }
  var name = $("#nicename").val();
  if (is_blank(name)) {
    show_error("Please enter your nice name.");
    return false
  }
  var p1 = $("#passwd1").val();
  var p2 = $("#passwd2").val();
  if (p1.length<6) {
    show_error("The password should be at least 6 characters long.");
    return false;
  }
  if (p1!=p2) {
    show_error("Please enter the same password in the two password fields.");
    return false;
  }
  $("#passwd").val(MD5(p1));
  return true;
}

function show_error(s) {
  $("#err_msg").html(s);
  $("#err_msg").show();
}
</script>
#end raw
</head>
<body>
  <div class="container margin_top">
    <div class="span-12 prepend-6 append-6 last">
      <p><a href="http://www.expressme.org/" target="_blank"><img src="/static/image/expressme.gif" width="326" height="60" /></a></p>
      <form name="register" id="register" method="post" action="register" onsubmit="return validate_form()">
        <fieldset>
          <legend>&nbsp;Register a new user&nbsp;</legend>
          <input id="passwd" name="passwd" type="hidden" />
          <p id="error"><div id="err_msg" class="error" style="display:none"></div><p>
          #if $varExists('error')
          <script type="text/javascript">
            show_error("${error}");
          </script>
          #end if
          <p><label for="email">Email</label><br/><input id="email" name="email" type="text" maxlength="50" class="text" /></p>
          <p><label for="nicename">Nice name</label><br><input id="nicename" name="nicename" type="text" maxlength="50" class="text" /></p> 
          <p><label for="passwd">Password</label><br/><input id="passwd1" name="passwd1" type="password" maxlength="20" class="text" /></p>
          <p><label for="passwd2">Re-type your password</label><br/><input id="passwd2" name="passwd2" type="password" maxlength="20" class="text" /></p>
          <p><input type="submit" value="Register"></p>
        </fieldset>
      </form>
      <p><a href="signin">Sign In</a> | <a href="#">Lost your password?</a></p>
      <hr class="space"/>
      <hr class="alt"/>
      <p>Copyright&copy;2010, Express Me on AppEngine</p>
    </div>
  </div>
</body>
</html>
