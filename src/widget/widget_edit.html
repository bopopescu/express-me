<!-- begin edit.html -->

<div class="panel box-round">
  <div class="panel-title">Widget Bar</div>
  <div class="panel-content">
    #for $instance in $instances
    <div class="panel box-round">
      <div class="panel-title">${instance.widget_id}</div>
      <div class="panel-content">
        #set $w=$instance.widget_class()
        $w.load($instance.key().__str__(), $instance.model)
        $w.render()
        <form name="widget_form" method="post">
          <input type="hidden" name="app" value="${app}"/>
          <input type="hidden" name="action" value="${action}"/>
          <input type="hidden" name="btn" value="edit"/>
          <input type="hidden" name="id" value="${instance.key}"/>
        #for $key, $setting in $instance.settings.items()
          <div>$setting.description</div>
          <div>$setting_to_html($key, $setting)</div>
        #end for
          <div><button type="submit" name="submit">Save</button> <button type="button" name="cancel">Cancel</button></div>
        </form>
      </div>
    </div>
    #end for
    #if not $instances
      <div style="padding:12px; font-size:1.1em">No widget was added.</div>
    #end if
  </div>
</div>

<div style="padding:3px 6px">
  <form name="add" action="/manage" method="post">
  <input type="hidden" name="app" value="${app}"/>
  <input type="hidden" name="action" value="${action}"/>
  <input type="hidden" name="btn" value="add"/>
  <select name="widget_id">
  #for $widget in $installed_widgets
    <option value="${widget.id}">${widget.name}</option>
  #end for
  </select>
  <button type="submit" name="add">Add</button>
  </form>
</div>
<!-- end edit.html -->
